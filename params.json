{"name":"Google Analytics Integration","tagline":"Internally developed Google Analytics Integration library for use on sites that use the Blue State Digital Tools. Currently used on over 200 websites.","body":"Blue State Digital Google Analytics Integration Script\r\n================================\r\n\r\nGoogle Analytics Integration library for use on sites that use the BSD Tools, developed by Blue State Digital agency employees, and available for public use under the Apache 2 license. \r\n\r\n<h1>Installation</h1>\r\nIn order to correctly install the `ga_integration-min.js` snippet, you need to break the standard Google Analytics snippet in half. This is so that the custom variables set in the script set before the pageview, but after the tracker is created. \r\n```html\r\n\t<!-- START Google Analytics -->\r\n\t<script>\r\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\r\n\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\r\n\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\r\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\r\n\tga('create', '<!--place id here-->', 'auto', {'allowLinker': true, 'siteSpeedSampleRate': 20});\r\n\tga('require', 'linker');\r\n\t//See https://github.com/bluestatedigital/bsd-google-analytics-integration#configuration for configuration options\r\n\tvar ga_integration_config={};\r\n\t</script>\r\n\t<script src=\"//s.bsd.net/bsdaction/default/page/-/js/analytics/ga_integration-min.js\"></script>\r\n\t<script>\r\n\tga('send', 'pageview');\r\n\t</script>\r\n\t<!-- END Google Analytics -->\r\n```\r\n\r\n<h1>Features</h1>\r\n\r\n<h3>E-Commerce</h3>\r\nAll contributions are tracked by default as e-commerce transactions, with the product name set to the form name and the category set to the type of contribution. Different types include the various combinations of Recurring, Quick Donate, and Ticket-based contributions. \r\n\r\n<h3>GA Event Categories</h3>\r\n- Completions: Tracks completed BSD Actions in the case of signups, ecommerce and quick-donate opt-in. The ecommerce event is duplicative of the E-Commerce module data, but is less accurate because the associated values are rounded.\r\n- PDF Clicks: This tracks clicks on links to a pdf.\r\n- Form Submits: Tracks all form submits, regardless of the outcome.\r\n- Errors: Validation errors in Signup, Contribution and Share.\r\n- Error Log: JavaScript Errors\r\n- Exits: Clicks on links to a different domain\r\n- Mailcheck: catches mis-spelled email addresses\r\n- Duplication of the Social Events\r\n- Tests: Data from our Optimizely experiments running on the page\r\n\r\n\r\n<h3>Social Tracking</h3>\r\nBy default, the following things, when properly configured, are automatically tracked as social tracking and duplicated to event tracking:\r\n- Facebook Likes, Clicks to Facebook Shares, and Clicks to Facebook\r\n- All Twitter intents events, including callbacks for completed tweets and follows. \r\n- External clicks to Pinterest, Facebook, Twitter and YouTube. \r\n\r\n<h3>Custom Variables</h3>\r\n1. Source: Captures the value of a ?source parameter in the URL\r\n2. msid: Grabs the obfuscated mailing_send_id cookie when it's available. This can be decoded by the analytics team and made to associate traffic with a particular mailing (in the absence of proper tagging)\r\n3. Has GUID: Tags whether a visitor has a guid cookie at the start of their visit. \r\n4. Has SPUD:Tags whether a visitor has a spud cookie at the start of their visit. \r\n5. Subsource: Captures the value of a ?subsource parameter in the URL\r\n\r\n<h3>File Tracking</h3>\r\nBy default, GAI will track clicks on pdf files. You can extend this tracking to any filetype with the file_extensions configuration attribute (see below).\r\n\r\n<h2>Configuration</h2>\r\n\r\nThe behvaior of the library can be configured by the `ga_integration_config` global object.\r\n\r\nThe configuration attributes are:\r\n\r\n - `bsddomain` - Set to one of the bsd subdomains (e.g. `https://donate.domain.org`, or `//donate-domain.org`) for the purposes of grabbing LOE information or loading the SPUD script. To avoid mixed content errors, this domain should support HTTPS.\r\n - `cookiedomain` - if this isn't set manually, the library will just use the `location.hostname.split` method used in the above snippet on the `_setDomainName` call to grab the current domain.\r\n - `nocookie` - Set to `true` if you want to prevent the library from using cookies. This disables any of the tracking features that rely on cookies. \r\n - `msid_seed` - passes the actual `mailing_send_id` instead of the obfuscated `mailing_send_id` that is set by default on the mailing cookie. Should always set it if we can, especially for sites using the BSD mailer. Contact BSD to find out this value. \r\n - `nospud` - Set to `true` to disable SPUD features. (Default: `false`)\r\n - `noloe` - Set to `true` to disable LOE usage. (Default: `false`)\r\n - `file_extensions` - tracks clicks on files with extensions matching a pipe-separated list . If no extensions are specified, will only track clicks on pdfs. You can disable all file click tracking by setting file_extension\r\n\r\nExample:\r\n\r\n```javascript\r\nvar ga_integration_config = {\r\n  bsdomain: \"//secure-domain.client.com\",\r\n  msid_seed: 9023328,\r\n  noloe: true,\r\n  file_extensions: '.pdf|.docx|.pptx|.zip'\r\n}\r\n````\r\n","google":"UA-4339126-9","note":"Don't delete this file! It's used internally to help with page regeneration."}